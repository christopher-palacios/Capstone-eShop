{"ast":null,"code":"var _jsxFileName = \"/Users/christopherpalacios/Desktop/christopher-palacios-capstone-c41/eShop/client/src/components/CheckoutModal/CheckoutModal.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState } from \"react\";\nimport { AppContext } from \"../../AppContext/AppContext\";\nimport { useStripe, useElements, CardElement } from \"@stripe/react-stripe-js\";\nimport { Modal, Button } from \"react-bootstrap\";\nimport Field from \"../../components/Field/Field\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst baseUrl = \"http://localhost:8080/api\";\n\nfunction CheckoutModal(props) {\n  _s();\n\n  var _cart$cartTotal;\n\n  const {\n    cart,\n    token,\n    loading,\n    setLoading,\n    setPurchased,\n    setCart\n  } = useContext(AppContext);\n  const stripe = useStripe();\n  const elements = useElements();\n  const [formData, setFormData] = useState({});\n  const CARD_OPTIONS = {\n    iconStyle: \"solid\",\n    style: {\n      base: {\n        iconColor: \"#264653\",\n        // color: '#fff',\n        fontWeight: 700,\n        fontFamily: \"Roboto, Open Sans, Segoe UI, sans-serif\",\n        fontSize: \"18px\",\n        fontSmoothing: \"antialiased\",\n        \":-webkit-autofill\": {\n          color: \"#264653\"\n        },\n        \"::placeholder\": {\n          color: \"#e0522f7a\"\n        }\n      },\n      invalid: {\n        iconColor: \"#e76f51\",\n        color: \"#e0522f7a\"\n      }\n    }\n  };\n  console.log(token);\n\n  const handleChange = e => {\n    setFormData({ ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handlePayment = async () => {\n    setLoading(true);\n    const {\n      paymentMethod\n    } = await stripe.createPaymentMethod({\n      type: \"card\",\n      card: elements.getElement(CardElement),\n      billing_details: {\n        name: formData.name,\n        email: formData.email,\n        phone: formData.phone,\n        address: {\n          city: formData.city,\n          country: \"US\",\n          line1: formData.line1,\n          postal_code: formData.postal_code,\n          state: formData.state\n        }\n      }\n    });\n    const {\n      data\n    } = await axios.post(`${baseUrl}/order/intent`, {\n      cart,\n      paymentMethod\n    }, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    const {\n      paymentIntent\n    } = await stripe.confirmCardPayment(data, {\n      payment_method: {\n        card: elements.getElement(CardElement),\n        billing_details: {\n          name: formData.name,\n          email: formData.email,\n          phone: formData.phone,\n          address: {\n            city: formData.city,\n            country: \"US\",\n            line1: formData.line1,\n            postal_code: formData.postal_code,\n            state: formData.state\n          }\n        }\n      }\n    });\n\n    if (paymentIntent.status === \"succeeded\") {\n      await axios.post(`${baseUrl}/order`, {\n        cart,\n        transationId: paymentIntent.id\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(res => console.log(res.data)).catch(err => console.log(err.message));\n      setLoading(false);\n      setCart({});\n      setPurchased(true);\n      props.onHide();\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Modal, { ...props,\n    size: \"lg\",\n    \"aria-labelledby\": \"contained-modal-title-vcenter\",\n    centered: true,\n    children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n      closeButton: true,\n      children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n        id: \"contained-modal-title-vcenter\",\n        children: \"Checkout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"form\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"pl-2\",\n          children: \"Billing Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(Field, {\n            label: \"Name\",\n            id: \"name\",\n            name: \"name\",\n            type: \"text\",\n            placeholder: \"Jane Doe\",\n            required: true,\n            autoComplete: \"name\",\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Field, {\n            label: \"Email\",\n            id: \"email\",\n            name: \"email\",\n            type: \"email\",\n            placeholder: \"janedoe@gmail.com\",\n            required: true,\n            autoComplete: \"email\",\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Field, {\n            label: \"Phone\",\n            id: \"phone\",\n            name: \"phone\",\n            type: \"tel\",\n            placeholder: \"(941) 555-0123\",\n            required: true,\n            autoComplete: \"tel\",\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Field, {\n            label: \"Shipping Address\",\n            id: \"line1\",\n            name: \"line1\",\n            type: \"text\",\n            placeholder: \"123 Main St\",\n            required: true,\n            autoComplete: \"line1\",\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Field, {\n            label: \"City\",\n            id: \"city\",\n            name: \"city\",\n            type: \"text\",\n            placeholder: \"Miami\",\n            required: true,\n            autoComplete: \"city\",\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Field, {\n            label: \"State\",\n            id: \"state\",\n            name: \"state\",\n            type: \"text\",\n            placeholder: \"FL\",\n            required: true,\n            autoComplete: \"state\",\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n          className: \"form-group\",\n          children: /*#__PURE__*/_jsxDEV(CardElement, {\n            options: CARD_OPTIONS\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n      className: \"d-flex justify-content-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Total: $\", cart === null || cart === void 0 ? void 0 : (_cart$cartTotal = cart.cartTotal) === null || _cart$cartTotal === void 0 ? void 0 : _cart$cartTotal.toFixed()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handlePayment,\n        disabled: loading,\n        children: loading ? \"Sending...\" : \"Confirm Payment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 5\n  }, this);\n}\n\n_s(CheckoutModal, \"T5hLPuWrmswobn/kPSySVW5ItJg=\", false, function () {\n  return [useStripe, useElements];\n});\n\n_c = CheckoutModal;\nexport default CheckoutModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"CheckoutModal\");","map":{"version":3,"sources":["/Users/christopherpalacios/Desktop/christopher-palacios-capstone-c41/eShop/client/src/components/CheckoutModal/CheckoutModal.jsx"],"names":["React","useContext","useState","AppContext","useStripe","useElements","CardElement","Modal","Button","Field","axios","baseUrl","CheckoutModal","props","cart","token","loading","setLoading","setPurchased","setCart","stripe","elements","formData","setFormData","CARD_OPTIONS","iconStyle","style","base","iconColor","fontWeight","fontFamily","fontSize","fontSmoothing","color","invalid","console","log","handleChange","e","target","name","value","handlePayment","paymentMethod","createPaymentMethod","type","card","getElement","billing_details","email","phone","address","city","country","line1","postal_code","state","data","post","headers","Authorization","paymentIntent","confirmCardPayment","payment_method","status","transationId","id","then","res","catch","err","message","onHide","cartTotal","toFixed"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,QAA5B,QAA4C,OAA5C;AACA,SAASC,UAAT,QAA2B,6BAA3B;AACA,SAASC,SAAT,EAAoBC,WAApB,EAAiCC,WAAjC,QAAoD,yBAApD;AACA,SAASC,KAAT,EAAgBC,MAAhB,QAA8B,iBAA9B;AACA,OAAOC,KAAP,MAAkB,8BAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AACA,MAAMC,OAAO,GAAG,2BAAhB;;AAEA,SAASC,aAAT,CAAuBC,KAAvB,EAA8B;AAAA;;AAAA;;AAC5B,QAAM;AACJC,IAAAA,IADI;AAEJC,IAAAA,KAFI;AAGJC,IAAAA,OAHI;AAIJC,IAAAA,UAJI;AAKJC,IAAAA,YALI;AAMJC,IAAAA;AANI,MAOFlB,UAAU,CAACE,UAAD,CAPd;AAQA,QAAMiB,MAAM,GAAGhB,SAAS,EAAxB;AACA,QAAMiB,QAAQ,GAAGhB,WAAW,EAA5B;AACA,QAAM,CAACiB,QAAD,EAAWC,WAAX,IAA0BrB,QAAQ,CAAC,EAAD,CAAxC;AAEA,QAAMsB,YAAY,GAAG;AACnBC,IAAAA,SAAS,EAAE,OADQ;AAEnBC,IAAAA,KAAK,EAAE;AACLC,MAAAA,IAAI,EAAE;AACJC,QAAAA,SAAS,EAAE,SADP;AAEJ;AACAC,QAAAA,UAAU,EAAE,GAHR;AAIJC,QAAAA,UAAU,EAAE,yCAJR;AAKJC,QAAAA,QAAQ,EAAE,MALN;AAMJC,QAAAA,aAAa,EAAE,aANX;AAOJ,6BAAqB;AACnBC,UAAAA,KAAK,EAAE;AADY,SAPjB;AAUJ,yBAAiB;AACfA,UAAAA,KAAK,EAAE;AADQ;AAVb,OADD;AAeLC,MAAAA,OAAO,EAAE;AACPN,QAAAA,SAAS,EAAE,SADJ;AAEPK,QAAAA,KAAK,EAAE;AAFA;AAfJ;AAFY,GAArB;AAuBAE,EAAAA,OAAO,CAACC,GAAR,CAAYrB,KAAZ;;AACA,QAAMsB,YAAY,GAAIC,CAAD,IAAO;AAC1Bf,IAAAA,WAAW,CAAC,EAAE,GAAGD,QAAL;AAAe,OAACgB,CAAC,CAACC,MAAF,CAASC,IAAV,GAAiBF,CAAC,CAACC,MAAF,CAASE;AAAzC,KAAD,CAAX;AACD,GAFD;;AAIA,QAAMC,aAAa,GAAG,YAAY;AAChCzB,IAAAA,UAAU,CAAC,IAAD,CAAV;AACA,UAAM;AAAE0B,MAAAA;AAAF,QAAoB,MAAMvB,MAAM,CAACwB,mBAAP,CAA2B;AACzDC,MAAAA,IAAI,EAAE,MADmD;AAEzDC,MAAAA,IAAI,EAAEzB,QAAQ,CAAC0B,UAAT,CAAoBzC,WAApB,CAFmD;AAGzD0C,MAAAA,eAAe,EAAE;AACfR,QAAAA,IAAI,EAAElB,QAAQ,CAACkB,IADA;AAEfS,QAAAA,KAAK,EAAE3B,QAAQ,CAAC2B,KAFD;AAGfC,QAAAA,KAAK,EAAE5B,QAAQ,CAAC4B,KAHD;AAIfC,QAAAA,OAAO,EAAE;AACPC,UAAAA,IAAI,EAAE9B,QAAQ,CAAC8B,IADR;AAEPC,UAAAA,OAAO,EAAE,IAFF;AAGPC,UAAAA,KAAK,EAAEhC,QAAQ,CAACgC,KAHT;AAIPC,UAAAA,WAAW,EAAEjC,QAAQ,CAACiC,WAJf;AAKPC,UAAAA,KAAK,EAAElC,QAAQ,CAACkC;AALT;AAJM;AAHwC,KAA3B,CAAhC;AAiBA,UAAM;AAAEC,MAAAA;AAAF,QAAW,MAAM/C,KAAK,CAACgD,IAAN,CACpB,GAAE/C,OAAQ,eADU,EAErB;AAAEG,MAAAA,IAAF;AAAQ6B,MAAAA;AAAR,KAFqB,EAGrB;AACEgB,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAG,UAAS7C,KAAM;AADxB;AADX,KAHqB,CAAvB;AAUA,UAAM;AAAE8C,MAAAA;AAAF,QAAoB,MAAMzC,MAAM,CAAC0C,kBAAP,CAA0BL,IAA1B,EAAgC;AAC9DM,MAAAA,cAAc,EAAE;AACdjB,QAAAA,IAAI,EAAEzB,QAAQ,CAAC0B,UAAT,CAAoBzC,WAApB,CADQ;AAEd0C,QAAAA,eAAe,EAAE;AACfR,UAAAA,IAAI,EAAElB,QAAQ,CAACkB,IADA;AAEfS,UAAAA,KAAK,EAAE3B,QAAQ,CAAC2B,KAFD;AAGfC,UAAAA,KAAK,EAAE5B,QAAQ,CAAC4B,KAHD;AAIfC,UAAAA,OAAO,EAAE;AACPC,YAAAA,IAAI,EAAE9B,QAAQ,CAAC8B,IADR;AAEPC,YAAAA,OAAO,EAAE,IAFF;AAGPC,YAAAA,KAAK,EAAEhC,QAAQ,CAACgC,KAHT;AAIPC,YAAAA,WAAW,EAAEjC,QAAQ,CAACiC,WAJf;AAKPC,YAAAA,KAAK,EAAElC,QAAQ,CAACkC;AALT;AAJM;AAFH;AAD8C,KAAhC,CAAhC;;AAkBA,QAAIK,aAAa,CAACG,MAAd,KAAyB,WAA7B,EAA0C;AACxC,YAAMtD,KAAK,CACRgD,IADG,CAED,GAAE/C,OAAQ,QAFT,EAGF;AAAEG,QAAAA,IAAF;AAAQmD,QAAAA,YAAY,EAAEJ,aAAa,CAACK;AAApC,OAHE,EAIF;AACEP,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAG,UAAS7C,KAAM;AADxB;AADX,OAJE,EAUHoD,IAVG,CAUGC,GAAD,IAASjC,OAAO,CAACC,GAAR,CAAYgC,GAAG,CAACX,IAAhB,CAVX,EAWHY,KAXG,CAWIC,GAAD,IAASnC,OAAO,CAACC,GAAR,CAAYkC,GAAG,CAACC,OAAhB,CAXZ,CAAN;AAYAtD,MAAAA,UAAU,CAAC,KAAD,CAAV;AACAE,MAAAA,OAAO,CAAC,EAAD,CAAP;AACAD,MAAAA,YAAY,CAAC,IAAD,CAAZ;AACAL,MAAAA,KAAK,CAAC2D,MAAN;AACD;AACF,GAjED;;AAmEA,sBACE,QAAC,KAAD,OACM3D,KADN;AAEE,IAAA,IAAI,EAAC,IAFP;AAGE,uBAAgB,+BAHlB;AAIE,IAAA,QAAQ,MAJV;AAAA,4BAME,QAAC,KAAD,CAAO,MAAP;AAAc,MAAA,WAAW,MAAzB;AAAA,6BACE,QAAC,KAAD,CAAO,KAAP;AAAa,QAAA,EAAE,EAAC,+BAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YANF,eASE,QAAC,KAAD,CAAO,IAAP;AAAA,6BACE;AAAM,QAAA,SAAS,EAAC,MAAhB;AAAA,gCACE;AAAI,UAAA,SAAS,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAU,UAAA,SAAS,EAAC,YAApB;AAAA,kCACE,QAAC,KAAD;AACE,YAAA,KAAK,EAAC,MADR;AAEE,YAAA,EAAE,EAAC,MAFL;AAGE,YAAA,IAAI,EAAC,MAHP;AAIE,YAAA,IAAI,EAAC,MAJP;AAKE,YAAA,WAAW,EAAC,UALd;AAME,YAAA,QAAQ,MANV;AAOE,YAAA,YAAY,EAAC,MAPf;AAQE,YAAA,QAAQ,EAAEwB;AARZ;AAAA;AAAA;AAAA;AAAA,kBADF,eAWE,QAAC,KAAD;AACE,YAAA,KAAK,EAAC,OADR;AAEE,YAAA,EAAE,EAAC,OAFL;AAGE,YAAA,IAAI,EAAC,OAHP;AAIE,YAAA,IAAI,EAAC,OAJP;AAKE,YAAA,WAAW,EAAC,mBALd;AAME,YAAA,QAAQ,MANV;AAOE,YAAA,YAAY,EAAC,OAPf;AAQE,YAAA,QAAQ,EAAEA;AARZ;AAAA;AAAA;AAAA;AAAA,kBAXF,eAqBE,QAAC,KAAD;AACE,YAAA,KAAK,EAAC,OADR;AAEE,YAAA,EAAE,EAAC,OAFL;AAGE,YAAA,IAAI,EAAC,OAHP;AAIE,YAAA,IAAI,EAAC,KAJP;AAKE,YAAA,WAAW,EAAC,gBALd;AAME,YAAA,QAAQ,MANV;AAOE,YAAA,YAAY,EAAC,KAPf;AAQE,YAAA,QAAQ,EAAEA;AARZ;AAAA;AAAA;AAAA;AAAA,kBArBF,eA+BE,QAAC,KAAD;AACE,YAAA,KAAK,EAAC,kBADR;AAEE,YAAA,EAAE,EAAC,OAFL;AAGE,YAAA,IAAI,EAAC,OAHP;AAIE,YAAA,IAAI,EAAC,MAJP;AAKE,YAAA,WAAW,EAAC,aALd;AAME,YAAA,QAAQ,MANV;AAOE,YAAA,YAAY,EAAC,OAPf;AAQE,YAAA,QAAQ,EAAEA;AARZ;AAAA;AAAA;AAAA;AAAA,kBA/BF,eAyCE,QAAC,KAAD;AACE,YAAA,KAAK,EAAC,MADR;AAEE,YAAA,EAAE,EAAC,MAFL;AAGE,YAAA,IAAI,EAAC,MAHP;AAIE,YAAA,IAAI,EAAC,MAJP;AAKE,YAAA,WAAW,EAAC,OALd;AAME,YAAA,QAAQ,MANV;AAOE,YAAA,YAAY,EAAC,MAPf;AAQE,YAAA,QAAQ,EAAEA;AARZ;AAAA;AAAA;AAAA;AAAA,kBAzCF,eAmDE,QAAC,KAAD;AACE,YAAA,KAAK,EAAC,OADR;AAEE,YAAA,EAAE,EAAC,OAFL;AAGE,YAAA,IAAI,EAAC,OAHP;AAIE,YAAA,IAAI,EAAC,MAJP;AAKE,YAAA,WAAW,EAAC,IALd;AAME,YAAA,QAAQ,MANV;AAOE,YAAA,YAAY,EAAC,OAPf;AAQE,YAAA,QAAQ,EAAEA;AARZ;AAAA;AAAA;AAAA;AAAA,kBAnDF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF,eAgEE;AAAU,UAAA,SAAS,EAAC,YAApB;AAAA,iCACE,QAAC,WAAD;AAAa,YAAA,OAAO,EAAEb;AAAtB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAhEF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YATF,eA+EE,QAAC,KAAD,CAAO,MAAP;AAAc,MAAA,SAAS,EAAC,gCAAxB;AAAA,8BACE;AAAA,+BAAYV,IAAZ,aAAYA,IAAZ,0CAAYA,IAAI,CAAE2D,SAAlB,oDAAY,gBAAiBC,OAAjB,EAAZ;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAEE,QAAC,MAAD;AAAQ,QAAA,OAAO,EAAEhC,aAAjB;AAAgC,QAAA,QAAQ,EAAE1B,OAA1C;AAAA,kBACGA,OAAO,GAAG,YAAH,GAAkB;AAD5B;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA,YA/EF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAwFD;;GApMQJ,a;UASQR,S,EACEC,W;;;KAVVO,a;AAsMT,eAAeA,aAAf","sourcesContent":["import React, { useContext, useState } from \"react\";\nimport { AppContext } from \"../../AppContext/AppContext\";\nimport { useStripe, useElements, CardElement } from \"@stripe/react-stripe-js\";\nimport { Modal, Button } from \"react-bootstrap\";\nimport Field from \"../../components/Field/Field\";\nimport axios from \"axios\";\nconst baseUrl = \"http://localhost:8080/api\";\n\nfunction CheckoutModal(props) {\n  const {\n    cart,\n    token,\n    loading,\n    setLoading,\n    setPurchased,\n    setCart,\n  } = useContext(AppContext);\n  const stripe = useStripe();\n  const elements = useElements();\n  const [formData, setFormData] = useState({});\n\n  const CARD_OPTIONS = {\n    iconStyle: \"solid\",\n    style: {\n      base: {\n        iconColor: \"#264653\",\n        // color: '#fff',\n        fontWeight: 700,\n        fontFamily: \"Roboto, Open Sans, Segoe UI, sans-serif\",\n        fontSize: \"18px\",\n        fontSmoothing: \"antialiased\",\n        \":-webkit-autofill\": {\n          color: \"#264653\",\n        },\n        \"::placeholder\": {\n          color: \"#e0522f7a\",\n        },\n      },\n      invalid: {\n        iconColor: \"#e76f51\",\n        color: \"#e0522f7a\",\n      },\n    },\n  };\n  console.log(token);\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n  };\n\n  const handlePayment = async () => {\n    setLoading(true);\n    const { paymentMethod } = await stripe.createPaymentMethod({\n      type: \"card\",\n      card: elements.getElement(CardElement),\n      billing_details: {\n        name: formData.name,\n        email: formData.email,\n        phone: formData.phone,\n        address: {\n          city: formData.city,\n          country: \"US\",\n          line1: formData.line1,\n          postal_code: formData.postal_code,\n          state: formData.state,\n        },\n      },\n    });\n\n    const { data } = await axios.post(\n      `${baseUrl}/order/intent`,\n      { cart, paymentMethod },\n      {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      }\n    );\n\n    const { paymentIntent } = await stripe.confirmCardPayment(data, {\n      payment_method: {\n        card: elements.getElement(CardElement),\n        billing_details: {\n          name: formData.name,\n          email: formData.email,\n          phone: formData.phone,\n          address: {\n            city: formData.city,\n            country: \"US\",\n            line1: formData.line1,\n            postal_code: formData.postal_code,\n            state: formData.state,\n          },\n        },\n      },\n    });\n\n    if (paymentIntent.status === \"succeeded\") {\n      await axios\n        .post(\n          `${baseUrl}/order`,\n          { cart, transationId: paymentIntent.id },\n          {\n            headers: {\n              Authorization: `Bearer ${token}`,\n            },\n          }\n        )\n        .then((res) => console.log(res.data))\n        .catch((err) => console.log(err.message));\n      setLoading(false);\n      setCart({});\n      setPurchased(true);\n      props.onHide();\n    }\n  };\n\n  return (\n    <Modal\n      {...props}\n      size=\"lg\"\n      aria-labelledby=\"contained-modal-title-vcenter\"\n      centered\n    >\n      <Modal.Header closeButton>\n        <Modal.Title id=\"contained-modal-title-vcenter\">Checkout</Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <form className=\"form\">\n          <h5 className=\"pl-2\">Billing Details</h5>\n          <fieldset className=\"form-group\">\n            <Field\n              label=\"Name\"\n              id=\"name\"\n              name=\"name\"\n              type=\"text\"\n              placeholder=\"Jane Doe\"\n              required\n              autoComplete=\"name\"\n              onChange={handleChange}\n            />\n            <Field\n              label=\"Email\"\n              id=\"email\"\n              name=\"email\"\n              type=\"email\"\n              placeholder=\"janedoe@gmail.com\"\n              required\n              autoComplete=\"email\"\n              onChange={handleChange}\n            />\n            <Field\n              label=\"Phone\"\n              id=\"phone\"\n              name=\"phone\"\n              type=\"tel\"\n              placeholder=\"(941) 555-0123\"\n              required\n              autoComplete=\"tel\"\n              onChange={handleChange}\n            />\n            <Field\n              label=\"Shipping Address\"\n              id=\"line1\"\n              name=\"line1\"\n              type=\"text\"\n              placeholder=\"123 Main St\"\n              required\n              autoComplete=\"line1\"\n              onChange={handleChange}\n            />\n            <Field\n              label=\"City\"\n              id=\"city\"\n              name=\"city\"\n              type=\"text\"\n              placeholder=\"Miami\"\n              required\n              autoComplete=\"city\"\n              onChange={handleChange}\n            />\n            <Field\n              label=\"State\"\n              id=\"state\"\n              name=\"state\"\n              type=\"text\"\n              placeholder=\"FL\"\n              required\n              autoComplete=\"state\"\n              onChange={handleChange}\n            />\n          </fieldset>\n          <fieldset className=\"form-group\">\n            <CardElement options={CARD_OPTIONS} />\n          </fieldset>\n        </form>\n      </Modal.Body>\n      <Modal.Footer className=\"d-flex justify-content-between\">\n        <p>Total: ${cart?.cartTotal?.toFixed()}</p>\n        <Button onClick={handlePayment} disabled={loading}>\n          {loading ? \"Sending...\" : \"Confirm Payment\"}\n        </Button>\n      </Modal.Footer>\n    </Modal>\n  );\n}\n\nexport default CheckoutModal;\n"]},"metadata":{},"sourceType":"module"}