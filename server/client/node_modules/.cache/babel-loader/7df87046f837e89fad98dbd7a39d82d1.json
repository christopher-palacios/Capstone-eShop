{"ast":null,"code":"import _defineProperty from\"/Users/christopherpalacios/Desktop/christopher-palacios-capstone-c41/eShop/server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/christopherpalacios/Desktop/christopher-palacios-capstone-c41/eShop/server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/christopherpalacios/Desktop/christopher-palacios-capstone-c41/eShop/server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState}from\"react\";import{Link}from\"react-router-dom\";import{Modal}from\"react-bootstrap\";import swal from\"sweetalert\";import axios from\"axios\";import\"./LoginModal.scss\";import{AppContext}from\"../../AppContext/AppContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LogInModal(props){var _useContext=useContext(AppContext),setCurrentUser=_useContext.setCurrentUser,setIsSignedIn=_useContext.setIsSignedIn;var _useState=useState(),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var handleChange=function handleChange(e){//get form data and set it to state\nsetFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.name,e.target.value)));};var handleSubmit=function handleSubmit(e){// submit it to backend to receive token\ne.preventDefault();axios.post(\"https://localhost:8080/api/users/login\",formData).then(function(res){//get token from response\nvar token=res.data.token;//get user info from response\nvar _res$data$user=res.data.user,firstName=_res$data$user.firstName,_id=_res$data$user._id;var user=firstName;//save token in session storage\nlocalStorage.setItem(\"token\",token);//save user in session storage\nlocalStorage.setItem(\"user\",user);//save user id in session storage\nlocalStorage.setItem(\"userId\",_id);setIsSignedIn(true);setCurrentUser(user);localStorage.removeItem(\"guestCart\");}).catch(function(err){return swal({text:\"Check your email/password and try again\"});});};return/*#__PURE__*/_jsx(Modal,_objectSpread(_objectSpread({},props),{},{className:\"login\",size:\"lg\",centered:true,children:/*#__PURE__*/_jsxs(\"div\",{className:\"login__card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"login__welcome\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"login__welcome--title\",children:\"Log In\"}),/*#__PURE__*/_jsx(\"button\",{className:\"login__welcome--close\",onClick:props.loginClose,children:\"X\"})]}),/*#__PURE__*/_jsx(\"form\",{className:\"login__form\",onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(\"div\",{className:\"login__form--card\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"login__form--label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{className:\"login__form--input email\",onChange:handleChange,type:\"email\",name:\"email\"}),/*#__PURE__*/_jsx(\"label\",{className:\"login__form--label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{className:\"login__form--input password\",onChange:handleChange,type:\"password\",name:\"password\"}),/*#__PURE__*/_jsx(\"button\",{className:\"login__form--button\",onClick:props.loginClose,children:\"Login\"})]})}),/*#__PURE__*/_jsxs(\"h5\",{className:\"login__redirect\",children:[\"Not a member?\",/*#__PURE__*/_jsxs(Link,{onClick:props.loginSwitch,to:\"\",children:[\" \",\"Sign Up\",\" \"]}),\"here\"]})]})}));// }\n}export default LogInModal;","map":{"version":3,"sources":["/Users/christopherpalacios/Desktop/christopher-palacios-capstone-c41/eShop/server/client/src/components/LoginModal/LogInModal.jsx"],"names":["React","useContext","useState","Link","Modal","swal","axios","AppContext","LogInModal","props","setCurrentUser","setIsSignedIn","formData","setFormData","handleChange","e","target","name","value","handleSubmit","preventDefault","post","then","res","token","data","user","firstName","_id","localStorage","setItem","removeItem","catch","err","text","loginClose","loginSwitch"],"mappings":"8mBAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,CAA4BC,QAA5B,KAA4C,OAA5C,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,KAAT,KAAsB,iBAAtB,CACA,MAAOC,CAAAA,IAAP,KAAiB,YAAjB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,mBAAP,CACA,OAASC,UAAT,KAA2B,6BAA3B,C,wFAEA,QAASC,CAAAA,UAAT,CAAoBC,KAApB,CAA2B,iBACiBR,UAAU,CAACM,UAAD,CAD3B,CACjBG,cADiB,aACjBA,cADiB,CACDC,aADC,aACDA,aADC,eAEOT,QAAQ,EAFf,wCAElBU,QAFkB,eAERC,WAFQ,eAIzB,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAO,CAC1B;AACAF,WAAW,gCAAMD,QAAN,wBAAiBG,CAAC,CAACC,MAAF,CAASC,IAA1B,CAAiCF,CAAC,CAACC,MAAF,CAASE,KAA1C,GAAX,CACD,CAHD,CAKA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACJ,CAAD,CAAO,CAC1B;AACAA,CAAC,CAACK,cAAF,GACAd,KAAK,CACFe,IADH,CACQ,wCADR,CACkDT,QADlD,EAEGU,IAFH,CAEQ,SAACC,GAAD,CAAS,CACb;AACA,GAAMC,CAAAA,KAAK,CAAGD,GAAG,CAACE,IAAJ,CAASD,KAAvB,CACA;AAHa,mBAIcD,GAAG,CAACE,IAAJ,CAASC,IAJvB,CAILC,SAJK,gBAILA,SAJK,CAIMC,GAJN,gBAIMA,GAJN,CAKb,GAAMF,CAAAA,IAAI,CAAGC,SAAb,CACA;AACAE,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BN,KAA9B,EACA;AACAK,YAAY,CAACC,OAAb,CAAqB,MAArB,CAA6BJ,IAA7B,EACA;AACAG,YAAY,CAACC,OAAb,CAAqB,QAArB,CAA+BF,GAA/B,EACAjB,aAAa,CAAC,IAAD,CAAb,CACAD,cAAc,CAACgB,IAAD,CAAd,CACAG,YAAY,CAACE,UAAb,CAAwB,WAAxB,EACD,CAjBH,EAkBGC,KAlBH,CAkBS,SAACC,GAAD,QACL5B,CAAAA,IAAI,CAAC,CAAE6B,IAAI,CAAE,yCAAR,CAAD,CADC,EAlBT,EAqBD,CAxBD,CA0BA,mBACE,KAAC,KAAD,gCAAWzB,KAAX,MAAkB,SAAS,CAAC,OAA5B,CAAoC,IAAI,CAAC,IAAzC,CAA8C,QAAQ,KAAtD,uBACE,aAAK,SAAS,CAAC,aAAf,wBACE,aAAK,SAAS,CAAC,gBAAf,wBACE,WAAI,SAAS,CAAC,uBAAd,oBADF,cAEE,eAAQ,SAAS,CAAC,uBAAlB,CAA0C,OAAO,CAAEA,KAAK,CAAC0B,UAAzD,eAFF,GADF,cAOE,aAAM,SAAS,CAAC,aAAhB,CAA8B,QAAQ,CAAEhB,YAAxC,uBACE,aAAK,SAAS,CAAC,mBAAf,wBACE,cAAO,SAAS,CAAC,oBAAjB,mBADF,cAEE,cACE,SAAS,CAAC,0BADZ,CAEE,QAAQ,CAAEL,YAFZ,CAGE,IAAI,CAAC,OAHP,CAIE,IAAI,CAAC,OAJP,EAFF,cAQE,cAAO,SAAS,CAAC,oBAAjB,sBARF,cASE,cACE,SAAS,CAAC,6BADZ,CAEE,QAAQ,CAAEA,YAFZ,CAGE,IAAI,CAAC,UAHP,CAIE,IAAI,CAAC,UAJP,EATF,cAeE,eAAQ,SAAS,CAAC,qBAAlB,CAAwC,OAAO,CAAEL,KAAK,CAAC0B,UAAvD,mBAfF,GADF,EAPF,cA4BE,YAAI,SAAS,CAAC,iBAAd,wCAEE,MAAC,IAAD,EAAM,OAAO,CAAE1B,KAAK,CAAC2B,WAArB,CAAkC,EAAE,CAAC,EAArC,WACG,GADH,WAEU,GAFV,GAFF,UA5BF,GADF,GADF,CAyCA;AACD,CAED,cAAe5B,CAAAA,UAAf","sourcesContent":["import React, { useContext, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Modal } from \"react-bootstrap\";\nimport swal from \"sweetalert\";\nimport axios from \"axios\";\nimport \"./LoginModal.scss\";\nimport { AppContext } from \"../../AppContext/AppContext\";\n\nfunction LogInModal(props) {\n  const { setCurrentUser, setIsSignedIn } = useContext(AppContext);\n  const [formData, setFormData] = useState();\n\n  const handleChange = (e) => {\n    //get form data and set it to state\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = (e) => {\n    // submit it to backend to receive token\n    e.preventDefault();\n    axios\n      .post(\"https://localhost:8080/api/users/login\", formData)\n      .then((res) => {\n        //get token from response\n        const token = res.data.token;\n        //get user info from response\n        const { firstName, _id } = res.data.user;\n        const user = firstName;\n        //save token in session storage\n        localStorage.setItem(\"token\", token);\n        //save user in session storage\n        localStorage.setItem(\"user\", user);\n        //save user id in session storage\n        localStorage.setItem(\"userId\", _id);\n        setIsSignedIn(true);\n        setCurrentUser(user);\n        localStorage.removeItem(\"guestCart\");\n      })\n      .catch((err) =>\n        swal({ text: \"Check your email/password and try again\" })\n      );\n  };\n\n  return (\n    <Modal {...props} className=\"login\" size=\"lg\" centered>\n      <div className=\"login__card\">\n        <div className=\"login__welcome\">\n          <h1 className=\"login__welcome--title\">Log In</h1>\n          <button className=\"login__welcome--close\" onClick={props.loginClose}>\n            X\n          </button>\n        </div>\n        <form className=\"login__form\" onSubmit={handleSubmit}>\n          <div className=\"login__form--card\">\n            <label className=\"login__form--label\">Email</label>\n            <input\n              className=\"login__form--input email\"\n              onChange={handleChange}\n              type=\"email\"\n              name=\"email\"\n            />\n            <label className=\"login__form--label\">Password</label>\n            <input\n              className=\"login__form--input password\"\n              onChange={handleChange}\n              type=\"password\"\n              name=\"password\"\n            />\n            <button className=\"login__form--button\" onClick={props.loginClose}>\n              Login\n            </button>\n          </div>\n        </form>\n        <h5 className=\"login__redirect\">\n          Not a member?\n          <Link onClick={props.loginSwitch} to=\"\">\n            {\" \"}\n            Sign Up{\" \"}\n          </Link>\n          here\n        </h5>\n      </div>\n    </Modal>\n  );\n  // }\n}\n\nexport default LogInModal;\n"]},"metadata":{},"sourceType":"module"}