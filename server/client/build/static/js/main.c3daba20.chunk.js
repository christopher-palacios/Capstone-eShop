(this.webpackJsonpscoop=this.webpackJsonpscoop||[]).push([[0],{101:function(e,t,a){},126:function(e,t,a){},127:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},136:function(e,t,a){},137:function(e,t,a){},138:function(e,t,a){},140:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),r=a(24),s=a.n(r),o=(a(95),a(96),a(165)),i=a(86),l=a(156),d=a(17),u=a(7),j=(a(97),a(163)),m=a.p+"static/media/clothing.a9f7d612.jpg",b=a.p+"static/media/jewelry.22b35d8e.jpg",h=a.p+"static/media/electronics.d7fbda90.jpg",p=a(1);var O=function(){var e=Object(c.useState)(0),t=Object(u.a)(e,2),a=t[0],n=t[1];return Object(p.jsxs)(j.a,{className:"hero",activeIndex:a,onSelect:function(e,t){n(e)},children:[Object(p.jsxs)(j.a.Item,{children:[Object(p.jsx)("img",{className:"d-block w-100 hero__img",src:m,alt:"First slide"}),Object(p.jsxs)(j.a.Caption,{className:"hero__cap",children:[Object(p.jsx)("h1",{className:"hero__cap--title",children:"Clothing"}),Object(p.jsx)("h3",{className:"hero__cap--text",children:"Browse our entire range of Women's and Men's clothing"})]})]}),Object(p.jsxs)(j.a.Item,{children:[Object(p.jsx)("img",{className:"d-block w-100 hero__img",src:b,alt:"Second slide"}),Object(p.jsxs)(j.a.Caption,{className:"hero__cap",children:[Object(p.jsx)("h1",{className:"hero__cap--title",children:"Jewelry"}),Object(p.jsx)("h3",{className:"hero__cap--text",children:"A unique selection of jewelry"})]})]}),Object(p.jsxs)(j.a.Item,{children:[Object(p.jsx)("img",{className:"d-block w-100 hero__img",src:h,alt:"Third slide"}),Object(p.jsxs)(j.a.Caption,{className:"hero__cap",children:[Object(p.jsx)("h1",{className:"hero__cap--title",children:"Electronics"}),Object(p.jsx)("h3",{className:"hero__cap--text",children:"All new electronics available"})]})]})]})},g=(a(101),a(18)),x=a.n(g),f=a(36),_=a(14),v=a.n(_),N=a(13),y=a.n(N),S=Object(c.createContext)(),C=function(e){var t=e.children,a="https://e-shop-cp.herokuapp.com/api",n=localStorage.getItem("token"),r=Object(c.useState)([]),s=Object(u.a)(r,2),o=s[0],i=s[1],l=Object(c.useState)([]),d=Object(u.a)(l,2),j=d[0],m=d[1],b=Object(c.useState)([]),h=Object(u.a)(b,2),O=h[0],g=h[1],_=Object(c.useState)(!1),N=Object(u.a)(_,2),C=N[0],I=N[1],k=Object(c.useState)([]),w=Object(u.a)(k,2),T=w[0],q=w[1],L=Object(c.useState)([]),J=Object(u.a)(L,2),P=J[0],E=J[1],B=Object(c.useState)(),F=Object(u.a)(B,2),Q=F[0],U=F[1],M=Object(c.useState)(""),z=Object(u.a)(M,2),H=z[0],D=z[1],A=Object(c.useState)([]),K=Object(u.a)(A,2),R=K[0],$=K[1],W=Object(c.useState)(),Y=Object(u.a)(W,2),G=Y[0],X=Y[1],V=Object(c.useState)(!1),Z=Object(u.a)(V,2),ee=Z[0],te=Z[1],ae=Object(c.useState)(!1),ce=Object(u.a)(ae,2),ne=ce[0],re=ce[1],se=Object(c.useState)(!1),oe=Object(u.a)(se,2),ie=oe[0],le=oe[1],de=JSON.parse(localStorage.getItem("guestCart")),ue={isOpen:!0,products:[],cartQuantity:0,cartTotal:0},je=function(){var e=Object(f.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y.a.get("".concat(a,"/categories")).then((function(e){q(e.data)})).catch((function(e){return v()(e.message)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),me=function(){var e=Object(f.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y.a.get("".concat(a,"/product/list")).then((function(e){m(e.data)})).catch((function(e){return v()(e.message)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=Object(f.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y.a.get("".concat(a,"/cart"),{headers:{authorization:"Bearer ".concat(n)}}).then((function(e){return console.log("cart",e.data)})).catch((function(e){return v()("getCart",e.message)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();console.log(!R.cartQuantity);var he=function(){var e=Object(f.a)(x.a.mark((function e(t,c){var r,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=11;break}r=JSON.parse(localStorage.getItem("guestCart")),s=r.products.map((function(e){return e.name})).indexOf(t.name),r.products[s].quantity=r.products[s].quantity+1,r.products[s].productTotal=r.products[s].productTotal+t.price,r.cartTotal=r.products.map((function(e){return e.productTotal})).reduce((function(e,t){return e+t})),r.cartQuantity=r.products.map((function(e){return e.quantity})).reduce((function(e,t){return e+t})),$(r),localStorage.setItem("guestCart",JSON.stringify(r)),e.next=20;break;case 11:if(!n){e.next=20;break}return e.prev=12,e.next=15,y.a.put("".concat(a,"/cart/increase/").concat(c),{product:t,cartId:c},{headers:{authorization:"Bearer ".concat(n)}}).then((function(e){return $(e.data)}),I(!1));case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(12),v()("Please login or create an account to add items to your cart",e.t0.message);case 20:case"end":return e.stop()}}),e,null,[[12,17]])})));return function(t,a){return e.apply(this,arguments)}}(),pe=function(){var e=Object(f.a)(x.a.mark((function e(t,c){var r,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=11;break}r=JSON.parse(localStorage.getItem("guestCart")),s=r.products.map((function(e){return e.name})).indexOf(t.name),r.products[s].quantity=r.products[s].quantity-1,r.products[s].productTotal=r.products[s].productTotal-t.price,r.cartTotal=r.products.map((function(e){return e.productTotal})).reduce((function(e,t){return e+t})),r.cartQuantity=r.products.map((function(e){return e.quantity})).reduce((function(e,t){return e+t})),$(r),localStorage.setItem("guestCart",JSON.stringify(r)),e.next=19;break;case 11:return e.prev=11,e.next=14,y.a.put("".concat(a,"/cart/decrease/").concat(c),{product:t},{headers:{authorization:"Bearer ".concat(n)}}).then((function(e){return $(e.data)})).catch((function(e){return v()(e.message)}));case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(11),v()(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[11,16]])})));return function(t,a){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(f.a)(x.a.mark((function e(t,c){var r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=7;break}1===(r=JSON.parse(localStorage.getItem("guestCart"))).products.length?(r.products=[],r.cartTotal=0,r.cartQuantity=0):r.products.length>1&&(r.products=r.products.filter((function(e){return e.name!==t.name})),r.cartTotal=r.products.map((function(e){return e.productTotal})).reduce((function(e,t){return e+t})),r.cartQuantity=r.products.map((function(e){return e.quantity})).reduce((function(e,t){return e+t}))),$(r),localStorage.setItem("guestCart",JSON.stringify(r)),e.next=15;break;case 7:return e.prev=7,e.next=10,y.a.put("".concat(a,"/cart/delete/").concat(c),{product:t,cartId:c},{headers:{authorization:"Bearer ".concat(n)}}).then((function(e){return $(e.data)})).catch((function(e){return v()(e.message)}));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),v()(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[7,12]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){if(je(),me(),n||null!==de){if(!n&&de){var e=JSON.parse(localStorage.getItem("guestCart"));$(e)}}else $(ue),localStorage.setItem("guestCart",JSON.stringify(ue));n&&(localStorage.removeItem("guestCart"),be())}),[n]),Object(p.jsx)(S.Provider,{value:{baseUrl:a,randomItems:P,setRandomItems:E,isSignedIn:ie,setIsSignedIn:le,logInModalShow:ee,setLogInModalShow:te,signUpModalShow:ne,setSignUpModalShow:re,selectedCategory:o,setSelectedCategory:i,selectedProduct:O,setSelectedProduct:g,loading:C,setLoading:I,categoryList:T,setCategoryList:q,productList:j,currentUser:Q,setCurrentUser:U,getCategoryList:je,drop:H,setDrop:D,cart:R,setCart:$,token:n,increaseQty:he,decreaseQty:pe,deleteProduct:Oe,purchased:G,setPurchased:X},children:t})};var I=function(){var e=Object(c.useContext)(S).categoryList;return Object(c.useEffect)((function(){}),[]),Object(p.jsxs)("section",{className:"home",children:[Object(p.jsx)("div",{className:"home__carousel",children:Object(p.jsx)(O,{})}),Object(p.jsx)("h2",{className:"home__title",children:"Welcome to eShop"}),Object(p.jsxs)("div",{className:"home__shop",children:[Object(p.jsxs)(o.a,{className:"text-center home__feat",children:[Object(p.jsx)(o.a.Header,{className:"home__feat--title",children:"Categories"}),Object(p.jsxs)(o.a.Body,{className:"home__feat--body",children:[Object(p.jsx)(o.a.Text,{className:"home__feat--text",children:"Shop our categoriess below"}),Object(p.jsx)(d.b,{to:"/categories",children:Object(p.jsx)(i.a,{className:"home__feat--button",variant:"primary",children:"Shop Now"})})]})]}),Object(p.jsx)("div",{className:"home__categories",children:Object(p.jsx)("div",{className:"home__categories--card",children:Object(p.jsxs)(o.a,{className:"text-center",children:[Object(p.jsx)(o.a.Header,{className:"home__categories--title",children:"Featured"}),Object(p.jsx)(l.a,{children:null===e||void 0===e?void 0:e.map((function(e){return Object(p.jsx)(d.b,{className:"home__categories--link",to:"/categories/".concat(e._id),children:Object(p.jsx)(l.a.Item,{className:"home__categories--list-item",children:e.name})},e._id)}))})]})})})]})]})},k=a(75),w=a.n(k),T=a(39),q=a(15),L=a(161);a(126);var J=function(e){var t=Object(c.useContext)(S),a=t.setCurrentUser,n=t.setIsSignedIn,r=t.baseUrl,s=Object(c.useState)(),o=Object(u.a)(s,2),i=o[0],l=o[1],j=function(e){l(Object(q.a)(Object(q.a)({},i),{},Object(T.a)({},e.target.name,e.target.value)))};return Object(p.jsx)(L.a,Object(q.a)(Object(q.a)({},e),{},{className:"login",size:"lg",centered:!0,children:Object(p.jsxs)("div",{className:"login__card",children:[Object(p.jsxs)("div",{className:"login__welcome",children:[Object(p.jsx)("h1",{className:"login__welcome--title",children:"Log In"}),Object(p.jsx)("button",{className:"login__welcome--close",onClick:e.loginClose,children:"X"})]}),Object(p.jsx)("form",{className:"login__form",onSubmit:function(e){e.preventDefault(),y.a.post("".concat(r,"/users/login"),i).then((function(e){var t=e.data.token,c=e.data.user,r=c.firstName,s=c._id,o=r;localStorage.setItem("token",t),localStorage.setItem("user",o),localStorage.setItem("userId",s),n(!0),a(o),localStorage.removeItem("guestCart")})).catch((function(e){return v()({text:"Check your email/password and try again"})}))},children:Object(p.jsxs)("div",{className:"login__form--card",children:[Object(p.jsx)("label",{className:"login__form--label",children:"Email"}),Object(p.jsx)("input",{className:"login__form--input email",onChange:j,type:"email",name:"email"}),Object(p.jsx)("label",{className:"login__form--label",children:"Password"}),Object(p.jsx)("input",{className:"login__form--input password",onChange:j,type:"password",name:"password"}),Object(p.jsx)("button",{className:"login__form--button",onClick:e.loginClose,children:"Login"})]})}),Object(p.jsxs)("h5",{className:"login__redirect",children:["Not a member?",Object(p.jsxs)(d.b,{onClick:e.loginSwitch,to:"",children:[" ","Sign Up"," "]}),"here"]})]})}))};var P=function(e){var t=this,a=Object(c.useContext)(S).baseUrl,n=Object(c.useState)(),r=Object(u.a)(n,2),s=r[0],o=r[1],i=function(e){console.log(e.target.name),console.log(e.target.value),o(Object(q.a)(Object(q.a)({},s),{},Object(T.a)({},e.target.name,e.target.value)))};return Object(p.jsx)(L.a,Object(q.a)(Object(q.a)({},e),{},{className:"login",size:"lg",centered:!0,children:Object(p.jsxs)("div",{className:"login__card",children:[Object(p.jsx)("div",{className:"login__welcome",children:Object(p.jsx)("h1",{className:"login__welcome--title",children:"Get Started"})}),Object(p.jsx)("form",{className:"login__form",onSubmit:function(e){y.a.post("".concat(a,"/users"),s).then((function(e){var a=e.data.token;sessionStorage.setItem("token",a),t.props.history.push("/")})).catch((function(e){return alert(e)}))},children:Object(p.jsxs)("div",{className:"login__form--card",children:[Object(p.jsx)("label",{className:"login__form--label",children:"First Name"}),Object(p.jsx)("input",{className:"login__form--input firstName",onChange:i,type:"firstName",name:"firstName"}),Object(p.jsx)("label",{className:"login__form--label",children:"Last Name"}),Object(p.jsx)("input",{className:"login__form--input lastName",onChange:i,type:"lastName",name:"lastName"}),Object(p.jsx)("label",{className:"login__form--label",children:"Email"}),Object(p.jsx)("input",{className:"login__form--input email",onChange:i,type:"email",name:"email"}),Object(p.jsx)("label",{className:"login__form--label",children:"Password"}),Object(p.jsx)("input",{className:"login__form--input password",onChange:i,type:"password",name:"password"}),Object(p.jsx)("button",{className:"login__form--button",children:"Sign Up"})]})}),Object(p.jsxs)("h5",{className:"login__redirect",children:["If already registered.",Object(p.jsxs)(d.b,{onClick:e.signupSwitch,to:"",children:[" ","Log In"," "]}),"here"]})]})}))},E=(a(127),a(164)),B=a(166),F=a(157),Q=a(158);var U=function(){var e=Object(c.useContext)(S),t=e.currentUser,a=e.setCurrentUser,n=e.cart,r=e.categoryList,s=e.setIsSignedIn,o=Object(c.useState)(!1),i=Object(u.a)(o,2),l=i[0],d=i[1],j=Object(c.useState)(!1),m=Object(u.a)(j,2),b=m[0],h=m[1],O=localStorage.getItem("user");Object(c.useEffect)((function(){a(O)}),[]);var g=function(){d(!1)},x=function(){h(!1)};return console.log(n),Object(p.jsx)("nav",{className:"nav",children:Object(p.jsxs)(E.a,{className:"nav__color",variant:"dark",expand:"sm",children:[Object(p.jsx)(B.a.Link,{className:"nav__brand",href:"/",children:"eShop"}),Object(p.jsx)(E.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(p.jsx)(E.a.Collapse,{id:"basic-navbar-nav",children:Object(p.jsxs)(B.a,{className:"mr-auto",children:[Object(p.jsxs)(F.a,{className:"dropp",title:(null===n||void 0===n?void 0:n.cartQuantity)?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(w.a,{}),Object(p.jsx)(Q.a,{pill:!0,variant:"light",children:n.cartQuantity})]}):Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(w.a,{})}),children:[r.map((function(e){return Object(p.jsxs)(F.a.Item,{className:"nav__link",href:"/categories/".concat(e._id),children:["Shop ",e.name]},e._id)}))," ",Object(p.jsx)(F.a.Divider,{}),Object(p.jsx)(F.a.Item,{className:"nav__link",href:"/cart",children:"Your Cart"})]}),Object(p.jsx)(F.a,{title:t||"Guest",id:"dropdown-menu-align-right",children:t?Object(p.jsx)(F.a.Item,{className:"nav__link",onClick:function(){localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("userId"),a(null),s(!1)},children:"Sign Out"}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(F.a.Item,{onClick:function(){d(!0)},children:"Log In"}),Object(p.jsx)(F.a.Item,{className:"nav__link",onClick:function(){h(!0)},children:"Create Account"})]})})]})}),Object(p.jsx)(J,{onHide:g,show:l,loginClose:g,loginSwitch:function(){d(!1),h(!0)}}),Object(p.jsx)(P,{onHide:x,show:b,showLogin:l,signupClose:x,signupSwitch:function(){h(!1),d(!0)}})]})})},M=(a(134),a.p+"static/media/mn.2a700655.jpg"),z=a.p+"static/media/wmn.481e8888.jpg",H=a.p+"static/media/jewel.bdcc5a0a.jpg",D=a.p+"static/media/tech.483f059c.jpg",A=a(159);var K=function(){var e=Object(c.useContext)(S).categoryList;return Object(p.jsx)("section",{children:Object(p.jsxs)("div",{className:"categories",children:[Object(p.jsx)("h1",{className:"categories__title",children:"Categories"}),Object(p.jsx)("div",{className:"categories__container",children:null===e||void 0===e?void 0:e.map((function(e){return Object(p.jsx)("div",{className:"categories__card",children:Object(p.jsx)(d.b,{to:"/categories/".concat(e._id),className:"categories__card--link",children:Object(p.jsx)(A.a,{children:Object(p.jsxs)(o.a,{className:"categories__card--card",children:[Object(p.jsxs)(o.a.Body,{className:"categories__card--body",children:[Object(p.jsx)(o.a.Title,{className:"categories__card--title",children:e.name}),Object(p.jsx)(o.a.Img,{className:"categories__card--img",src:"Women's clothing"===e.name?z:"Men's clothing"===e.name?M:"Jewelery"===e.name?H:D})]}),Object(p.jsx)(o.a.Footer,{className:"categories__card--foot",children:Object(p.jsx)("small",{className:"text-muted",children:"Click here for more ".concat(e.name," ")})})]})})})},e._id)}))})]})})},R=(a(135),a(160)),$=a(31),W=a(162),Y=a(88);var G=function(e){var t=Object(c.useContext)(S),a=t.categoryList,n=t.baseUrl,r=Object(c.useState)([]),s=Object(u.a)(r,2),l=s[0],d=s[1],j=Object(c.useState)(""),m=Object(u.a)(j,2),b=m[0],h=m[1],O=Object(c.useState)(""),g=Object(u.a)(O,2),x=g[0],f=g[1],_=e.match.params.id;return Object(c.useEffect)((function(){var e;y.a.get("".concat(n,"/categories/").concat(_)).then((function(e){d(e.data)}));var t=a.filter((function(e){return e._id===_}));f(null===(e=t[0])||void 0===e?void 0:e.name)}),[a,_]),Object(p.jsxs)("section",{className:"itemList",children:[Object(p.jsx)("div",{className:"sub-nav",children:Object(p.jsxs)(B.a,{className:"sub-nav__links",activeKey:"/home",children:[Object(p.jsxs)(R.a,{id:"dropdown-basic-button",variant:"Secondary",title:x,children:[a.map((function(e){return Object(p.jsx)($.a.Item,{href:"/categories/".concat(e._id),children:e.name},e._id)})),Object(p.jsx)($.a.Item,{href:"/categories",children:"Categories"})]}),Object(p.jsx)("div",{className:"sub-nav__form",children:Object(p.jsxs)(W.a,{inline:!0,children:[Object(p.jsx)(Y.a,{type:"text",onChange:function(e){h(e.target.value)},placeholder:"Search",className:"sub-nav__form--input"}),Object(p.jsx)(i.a,{className:"sub-nav__form--button",variant:"outline",children:"Search"})]})})]})}),Object(p.jsx)("div",{className:"shop",children:Object(p.jsx)("div",{className:"shop__container",children:Object(p.jsx)(A.a,{className:"shop__card",children:null===l||void 0===l?void 0:l.filter((function(e){return e.name.toLowerCase().includes(b.toLowerCase())})).map((function(e){return Object(p.jsxs)(o.a,{className:"shop__card--indv",children:[Object(p.jsx)(o.a.Body,{className:"shop__card--body",children:Object(p.jsx)(o.a.Link,{className:"shop__card--top",href:"/product/".concat(e._id),children:Object(p.jsx)(o.a.Img,{className:"shop__card--img",variant:"top",src:e.image})})}),Object(p.jsxs)(o.a.Footer,{className:"shop__card--footer",children:[Object(p.jsx)(o.a.Title,{children:e.name}),Object(p.jsx)("small",{className:"text-muted",children:Object(p.jsx)(o.a.Text,{children:"$".concat(e.price)})})]})]},e._id)}))})})})]})};a(136);var X=function(e){var t=Object(c.useState)([]),a=Object(u.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)(1),o=Object(u.a)(s,1)[0],l=Object(c.useContext)(S),j=l.setCart,m=l.token,b=l.baseUrl;return Object(c.useEffect)((function(){var t=e.match.params.id;y.a.get("".concat(b,"/product/").concat(t)).then((function(e){var t=e.data;r(t)}))}),[e.match.params]),Object(p.jsxs)("div",{className:"section",children:[Object(p.jsxs)(d.b,{className:"product__back",to:"/categories/".concat(n.categoryId),children:[" ","Back To ".concat(n.category)]}),Object(p.jsxs)("div",{className:"product",children:[Object(p.jsx)("img",{className:"product__img",alt:"product img",src:n.image}),Object(p.jsxs)("div",{className:"product__details",children:[Object(p.jsxs)("div",{className:"product__details--top",children:[Object(p.jsxs)("div",{className:"product__details--info",children:[Object(p.jsx)("h1",{className:"product__details--title",children:n.name}),Object(p.jsx)("h3",{className:"product__details--category",children:n.category}),Object(p.jsx)("h4",{children:"Price: $".concat(n.price)})]}),Object(p.jsxs)("div",{className:"product__details--action",children:[Object(p.jsx)("div",{className:"product__details--qty"}),Object(p.jsx)(i.a,{onClick:function(){!function(e){var t=e.price.slice(0,9).split(",").join("");if(!m){var a=localStorage.getItem("guestCart"),c=JSON.parse(a),n=c.products.map((function(e){return e.name})).includes(e.name);if(n){if(n){var r=c.products.map((function(e){return e.name})).indexOf(e.name);c.products[r].productTotal=Number(c.products[r].productTotal)+Number(e.price),c.products[r].quantity=Number(c.products[r].quantity)+1,c.cartTotal=c.products.map((function(e){return e.productTotal})).reduce((function(e,t){return e+t})),c.cartQuantity=c.products.map((function(e){return e.quantity})).reduce((function(e,t){return e+t})),j(c),v()("Success!","Item has beeen updated"),localStorage.setItem("guestCart",JSON.stringify(c))}}else{var s={quantity:1,productTotal:Number(e.price),productId:e._id,name:e.name,price:Number(e.price),image:e.image,category:e.category};c.products.push(s),c.cartTotal=c.products.map((function(e){return Number(e.productTotal)})).reduce((function(e,t){return e+t})),c.cartQuantity=c.products.map((function(e){return Number(e.quantity)})).reduce((function(e,t){return e+t})),localStorage.setItem("guestCart",JSON.stringify(c)),j(c),v()("Success!","Item has beeen added to cart")}}m&&y.a.post("".concat(b,"/cart"),{quantity:o,product:e,price:t},{headers:{authorization:"Bearer ".concat(m)}}).then((function(e){j(e.data),v()("Success!","Item has beeen added to cart")})).catch((function(e){return v()("Please sign in to continue shopping")}))}(n)},className:"product__details--add",variant:"outline-dark",children:"ADD TO CART"})]})]}),Object(p.jsx)("div",{className:"product__details--footer",children:Object(p.jsx)("p",{children:n.description})})]})]})]})},V=a(87),Z=a(41),ee=(a(137),function(e){var t=e.label,a=e.id,c=e.type,n=e.placeholder,r=e.required,s=e.autoComplete,o=e.value,i=e.onChange,l=e.name;return Object(p.jsxs)("div",{className:"form-row",children:[Object(p.jsx)("label",{htmlFor:a,className:"form-row-label",children:t}),Object(p.jsx)("input",{className:"form-row-input",id:a,type:c,name:l,placeholder:n,required:r,autoComplete:s,value:o,onChange:i})]})}),te="https://api.stripe.com";var ae=function(e){var t,a=Object(c.useContext)(S),n=a.cart,r=a.token,s=a.loading,o=a.setLoading,l=a.setPurchased,d=a.setCart,j=Object(Z.useStripe)(),m=Object(Z.useElements)(),b=Object(c.useState)({}),h=Object(u.a)(b,2),O=h[0],g=h[1],_=function(e){g(Object(q.a)(Object(q.a)({},O),{},Object(T.a)({},e.target.name,e.target.value)))},v=function(){var t=Object(f.a)(x.a.mark((function t(){var a,c,s,i,u,b;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o(!0),t.next=3,j.createPaymentMethod({type:"card",card:m.getElement(Z.CardElement),billing_details:{name:O.name,email:O.email,phone:O.phone,address:{city:O.city,country:"US",line1:O.line1,postal_code:O.postal_code,state:O.state}}});case 3:return a=t.sent,c=a.paymentMethod,t.next=7,y.a.post("".concat(te,"/order/intent"),{cart:n,paymentMethod:c},{headers:{Authorization:"Bearer ".concat(r)}}).catch((function(e){return console.log(e.message)}));case 7:return s=t.sent,i=s.data,t.next=11,j.confirmCardPayment(i,{payment_method:{card:m.getElement(Z.CardElement),billing_details:{name:O.name,email:O.email,phone:O.phone,address:{city:O.city,country:"US",line1:O.line1,postal_code:O.postal_code,state:O.state}}}});case 11:if(u=t.sent,"succeeded"!==(b=u.paymentIntent).status){t.next=20;break}return t.next=16,y.a.post("".concat(te,"/order"),{cart:n,transactionId:b.id},{headers:{Authorization:"Bearer ".concat(r)}}).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e.message)}));case 16:o(!1),d({}),l(!0),e.onHide();case 20:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(p.jsxs)(L.a,Object(q.a)(Object(q.a)({},e),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(p.jsx)(L.a.Header,{closeButton:!0,children:Object(p.jsx)(L.a.Title,{id:"contained-modal-title-vcenter",children:"Checkout"})}),Object(p.jsx)(L.a.Body,{children:Object(p.jsxs)("form",{className:"form",children:[Object(p.jsx)("h5",{className:"pl-2",children:"Billing Details"}),Object(p.jsxs)("fieldset",{className:"form-group",children:[Object(p.jsx)(ee,{label:"Name",id:"name",name:"name",type:"text",placeholder:"Jane Doe",required:!0,autoComplete:"name",onChange:_}),Object(p.jsx)(ee,{label:"Email",id:"email",name:"email",type:"email",placeholder:"janedoe@gmail.com",required:!0,autoComplete:"email",onChange:_}),Object(p.jsx)(ee,{label:"Phone",id:"phone",name:"phone",type:"tel",placeholder:"(941) 555-0123",required:!0,autoComplete:"tel",onChange:_}),Object(p.jsx)(ee,{label:"Shipping Address",id:"line1",name:"line1",type:"text",placeholder:"123 Main St",required:!0,autoComplete:"line1",onChange:_}),Object(p.jsx)(ee,{label:"City",id:"city",name:"city",type:"text",placeholder:"Miami",required:!0,autoComplete:"city",onChange:_}),Object(p.jsx)(ee,{label:"State",id:"state",name:"state",type:"text",placeholder:"FL",required:!0,autoComplete:"state",onChange:_})]}),Object(p.jsx)("fieldset",{className:"form-group",children:Object(p.jsx)(Z.CardElement,{options:{iconStyle:"solid",style:{base:{iconColor:"#264653",fontWeight:700,fontFamily:"Roboto, Open Sans, Segoe UI, sans-serif",fontSize:"18px",fontSmoothing:"antialiased",":-webkit-autofill":{color:"#264653"},"::placeholder":{color:"#e0522f7a"}},invalid:{iconColor:"#e76f51",color:"#e0522f7a"}}}})})]})}),Object(p.jsxs)(L.a.Footer,{className:"d-flex justify-content-between",children:[Object(p.jsxs)("p",{children:["Total: $",null===n||void 0===n||null===(t=n.cartTotal)||void 0===t?void 0:t.toFixed(2)]}),Object(p.jsx)(i.a,{onClick:v,disabled:s,children:s?"Sending...":"Confirm Payment"})]})]}))},ce=a(89),ne=a(11),re=(a(138),Object(ce.a)("pk_test_51IiCNaCDpCm9ESLbqwa8cZK5HOsB3HbcuwGcvUoQCQ3moNEix44pe4RaxQPYoiJJuS8VbtT0HK29rxKxKovr4joy00ylNJkXCj"));var se=function(){var e,t,a=Object(c.useContext)(S),n=a.cart,r=a.decreaseQty,s=a.increaseQty,j=a.deleteProduct,m=a.purchased,b=a.setCart,h=a.token,O=Object(c.useState)(!1),g=Object(u.a)(O,2),x=g[0],f=g[1],_=JSON.parse(localStorage.getItem("guestCart"));return Object(c.useEffect)((function(){h||b(_)}),[h]),m?v()("Thank you for your purchase")(Object(p.jsx)(ne.a,{to:"/"})):!(null===n||void 0===n?void 0:n.products)||(null===n||void 0===n||null===(e=n.products)||void 0===e?void 0:e.length)<1?Object(p.jsxs)("div",{className:"cart__alt",children:[Object(p.jsx)("h3",{className:"cart__alt--title",children:"Your cart"}),Object(p.jsx)("p",{className:"cart__alt--empty",children:"No items in your cart, please continue shopping!"})]}):Object(p.jsxs)("section",{className:"cart",children:[Object(p.jsxs)("div",{className:"cart__list",children:[Object(p.jsx)("div",{className:"cart__list--title"}),null===n||void 0===n||null===(t=n.products)||void 0===t?void 0:t.map((function(e){return Object(p.jsxs)(o.a,{className:"cart__card",children:[Object(p.jsx)(o.a.Img,{className:"cart__card--image",variant:"top",src:e.image}),Object(p.jsxs)(o.a.Body,{className:"cart__card--body",children:[Object(p.jsx)(d.b,{to:"/product/".concat(e.productId),children:Object(p.jsx)(o.a.Title,{children:e.name})}),Object(p.jsx)(d.b,{to:"/categories",children:Object(p.jsx)(o.a.Text,{children:"".concat(e.category)})})]}),Object(p.jsxs)(l.a,{className:"cart__info",children:[Object(p.jsx)(V.a,{className:"cart__info--price",children:"Price: $".concat(e.productTotal.toFixed(2))}),Object(p.jsxs)(V.a,{className:"cart__info--qty",children:[Object(p.jsx)("div",{className:"cart__info--sub",onClick:function(){r(Object(q.a)({},e),n._id)},children:"-"}),"Qty: ".concat(e.quantity),Object(p.jsx)("div",{className:"cart__info--add",onClick:function(){s(Object(q.a)({},e),n._id)},children:"+"})]}),Object(p.jsx)(i.a,{className:"cart__info--remo",onClick:function(){j(Object(q.a)({},e),n._id)},children:"Remove"})]})]},e.productId)}))]}),n||n?Object(p.jsxs)("div",{className:"cart__footer",children:[Object(p.jsxs)("div",{className:"cart__footer--total",children:[Object(p.jsxs)("h2",{children:["Your total:"," "]}),Object(p.jsx)("h2",{children:"$".concat(null===n||void 0===n?void 0:n.cartTotal.toFixed(2))})]}),Object(p.jsxs)("div",{className:"cart__footer--qty",children:[Object(p.jsx)("h2",{children:"Total items:"}),Object(p.jsx)("h2",{children:null===n||void 0===n?void 0:n.cartQuantity})]}),Object(p.jsx)("button",{onClick:function(){h?h&&f(!0):v()("Please sign in to checkout")},className:"cart__footer--checkout",children:"Checkout"})]}):Object(p.jsx)("div",{}),Object(p.jsx)(Z.Elements,{stripe:re,children:Object(p.jsx)(ae,{show:x,onHide:function(){return f(!1)}})})]})};var oe=function(){return Object(p.jsx)(C,{children:Object(p.jsxs)(d.a,{children:[Object(p.jsx)(U,{}),Object(p.jsxs)(ne.d,{children:[Object(p.jsx)(ne.b,{path:"/",exact:!0,component:I}),Object(p.jsx)(ne.b,{path:"/categories",exact:!0,component:K}),Object(p.jsx)(ne.b,{path:"/categories/:id",exact:!0,component:G}),Object(p.jsx)(ne.b,{path:"/product/:id",exact:!0,component:X}),Object(p.jsx)(ne.b,{exact:!0,path:"/cart",component:se})]})]})})},ie=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,167)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),c(e),n(e),r(e),s(e)}))};s.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(oe,{})}),document.getElementById("root")),ie()},95:function(e,t,a){},97:function(e,t,a){}},[[140,1,2]]]);
//# sourceMappingURL=main.c3daba20.chunk.js.map